<div class="main-container">
  <!-- Create group section -->
  <section class="create-group-container">
    <h2>Vytvoriť skupinu</h2>
    <form>
      <div class="mb-3">
            <textarea type="text" class="form-control" id="name" name="name"
                      placeholder="Zadajte názov novej skupiny" [(ngModel)]="newGroupName"></textarea>
      </div>
      <div class="row">
        <div class="offset-md-5 col-md-2">
          <button mat-raised-button class="create-button" color="primary" type="submit" (click)="onCreate()">Vytvoriť </button>
        </div>
      </div>
    </form>
  </section>

  <!-- Groups -->
  <div cdkDropListGroup class="groups-list-container">
    <div class="groups-container">
      @for (group of groupsList; track group) {
        <div class="cdk-container">
          <div class="group-head">
            <h2>{{group.name}}</h2>
              <mat-icon (click)="onDelete(group.id)">delete</mat-icon>
          </div>

          <div cdkDropList [cdkDropListData]="group.users" class="cdk-list" (cdkDropListDropped)="drop($event)">
            @for (user of group.users; track user) {
              @if(user.role == "master"){
                <div class="cdk-box users-item master" cdkDrag>
                  {{user.username}}
                  @if(isMobile || isTablet){
                    <div class="example-handle" cdkDragHandle>
                      <svg width="24px" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M10 9h4V6h3l-5-5-5 5h3v3zm-1 1H6V7l-5 5 5 5v-3h3v-4zm14 2l-5-5v3h-3v4h3v3l5-5zm-9 3h-4v3H7l5 5 5-5h-3v-3z"></path>
                        <path d="M0 0h24v24H0z" fill="none"></path>
                      </svg>
                    </div>
                  }
                </div>
              }@else{
                <div class="cdk-box users-item default" cdkDrag>
                  {{user.username}}
                  @if(isMobile || isTablet){
                    <div class="example-handle" cdkDragHandle>
                      <svg width="24px" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M10 9h4V6h3l-5-5-5 5h3v3zm-1 1H6V7l-5 5 5 5v-3h3v-4zm14 2l-5-5v3h-3v4h3v3l5-5zm-9 3h-4v3H7l5 5 5-5h-3v-3z"></path>
                        <path d="M0 0h24v24H0z" fill="none"></path>
                      </svg>
                    </div>
                  }
                </div>
              }
            }
          </div>
        </div>
      }
    </div>

    <div class="cdk-container cdk2">
      <h2>Nezaradení používatelia</h2>

      <div
        cdkDropList
        [cdkDropListData]="unassignedUsers"
        class="cdk-list unassigned-usrs-container"
        (cdkDropListDropped)="drop($event)">
        @for (user of unassignedUsers; track user) {
          @if(user.role == "master"){
            <div class="cdk-box users-item master" cdkDrag>
              {{user.username}}
              @if(isMobile || isTablet){
                <div class="example-handle" cdkDragHandle>
                  <svg width="24px" fill="currentColor" viewBox="0 0 24 24">
                    <path d="M10 9h4V6h3l-5-5-5 5h3v3zm-1 1H6V7l-5 5 5 5v-3h3v-4zm14 2l-5-5v3h-3v4h3v3l5-5zm-9 3h-4v3H7l5 5 5-5h-3v-3z"></path>
                    <path d="M0 0h24v24H0z" fill="none"></path>
                  </svg>
                </div>
              }
            </div>
          }@else{
            <div class="cdk-box users-item default" cdkDrag>
              {{user.username}}
              @if(isMobile || isTablet){
                <div class="example-handle" cdkDragHandle>
                  <svg width="24px" fill="currentColor" viewBox="0 0 24 24">
                    <path d="M10 9h4V6h3l-5-5-5 5h3v3zm-1 1H6V7l-5 5 5 5v-3h3v-4zm14 2l-5-5v3h-3v4h3v3l5-5zm-9 3h-4v3H7l5 5 5-5h-3v-3z"></path>
                    <path d="M0 0h24v24H0z" fill="none"></path>
                  </svg>
                </div>
              }
            </div>
          }
        }
      </div>
    </div>
  </div>
</div>
